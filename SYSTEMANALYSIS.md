# System Analysis Document: Media Location Analyser and Travel Price Fetcher

## Overview

This document outlines the design of the Media Location Analyser and Travel Price Fetcher system. It includes class diagrams, entity-relationship diagrams, and sequence diagrams to illustrate the system's structure, data relationships, and interaction flow.

## 1. Class Diagram

The following table summarises the classes used in the system, their attributes, methods, and relationships.

| **Class**           | **Attributes**                                               | **Methods**                               | **Relationships**                                     | **Description**                                                                                                                                   |
|---------------------|--------------------------------------------------------------|-------------------------------------------|------------------------------------------------------|---------------------------------------------------------------------------------------------------------------------------------------------------|
| `MediaAnalyser`     | `filePath: String`                                           | `analyseMedia()`                          | Aggregates `GoogleVideoIntelligenceAPI`, uses `GoogleResponseParser` | Handles the media analysis by utilising Google Cloud Video Intelligence API to extract objects, labels, and text from the media file.              |
| `GoogleVideoIntelligenceAPI` | `apiKey: String`                                          | `annotate()`                              | Aggregated by `MediaAnalyser`                                     | Interfaces with the Google Video Intelligence API to annotate the video/image file.                                                               |
| `GoogleResponseParser`| `annotations: Object`                                       | `parseAnnotations()`                      | Used by `MediaAnalyser`                                            | Parses the annotations returned by the Google API and extracts relevant entities like objects, labels, and text.                                   |
| `LocationComparer`  | `knownLocations: Map<String, List<String>>`                   | `compareAndScoreLocations(entities)`      | Used by `MainApp`                                                  | Compares parsed entities against known locations and scores them to determine the most likely location.                                           |
| `FlightPriceFetcher`| `apiKey: String`                                             | `fetchFlightPrices(destination)`          | Used by `MainApp`                                                  | Fetches flight prices based on the detected location using a flight pricing API.                                                                   |
| `HotelPriceFetcher` | `apiKey: String`                                             | `fetchHotelPrices(destination)`           | Used by `MainApp`                                                  | Fetches hotel prices based on the detected location using a hotel pricing API.                                                                    |
| `MainApp`           | `mediaFilePath: String`, `location: String`, `score: int`    | `main()`, `createToggleButton()`, `displayHotelPrices()` | Aggregates `MediaAnalyser`, `LocationComparer`, `FlightPriceFetcher`, `HotelPriceFetcher` | Coordinates the entire process: media analysis, location detection, fetching prices, and UI interaction.                                          |

## 2. Entity-Relationship Diagram (ERD)

The ERD conceptualises how different entities (classes) are related to each other, particularly focusing on data parsing and processing.

| **Entity**               | **Attributes**                              | **Relationships**                                           | **Description**                                                                                                   |
|--------------------------|---------------------------------------------|-------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------|
| `MediaFile`              | `filePath`, `mediaType`                     | Analysed by `MediaAnalyser`                                  | Represents the media file (video/image) that is to be analysed.                                                   |
| `AnnotationResult`       | `objects`, `labels`, `texts`                | Generated by `GoogleVideoIntelligenceAPI`, Parsed by `GoogleResponseParser` | Contains the result of media analysis, including detected objects, labels, and text.                              |
| `DetectedEntity`         | `description`, `entityType`                 | Part of `AnnotationResult`, Compared by `LocationComparer`   | Represents a detected entity (object, label, or text) within the media file.                                      |
| `Location`               | `name`, `keywords`, `score`                 | Associated with `DetectedEntity`                             | Represents a geographical location, with associated keywords used for matching detected entities.                 |
| `FlightPrice`            | `price`, `departureDate`, `returnDate`      | Fetched by `FlightPriceFetcher`                              | Contains information about flight prices for a specific location and date range.                                  |
| `HotelPrice`             | `topTierPrice`, `mediumTierPrice`, `budgetTierPrice` | Fetched by `HotelPriceFetcher`                               | Contains information about hotel prices in different tiers for a specific location.                               

## Conclusion

This design document outlines the architecture of the Media Location Analyser and Travel Price Fetcher system, focusing on class structure, data relationships, and the sequence of operations. The diagrams provide a clear understanding of how data is parsed, analysed, and utilised to deliver the final output.

